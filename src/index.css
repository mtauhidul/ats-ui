@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/* Sequence — light-first theme (Helvetica + teal/green) */
/* Key brand swatches from image:
   Teal  #025864  | Green  #00D47E
   Light bg ~#E9EEF2 | Heading text ~#10232C
*/

:root {
  --radius: 0.65rem;

  /* Typography */
  --font-sans: "Helvetica", "Helvetica Neue", Arial, ui-sans-serif, system-ui;

  /* Base (light) */
  --background: oklch(0.95 0.015 235); /* light cool gray-blue ~#E9EEF2 */
  --foreground: oklch(0.18 0.03 235); /* deep blue-gray text ~#10232C */

  --card: oklch(0.98 0.006 235); /* almost white panel */
  --card-foreground: oklch(0.18 0.03 235);

  --popover: oklch(0.98 0.006 235);
  --popover-foreground: oklch(0.18 0.03 235);

  --primary: oklch(0.65 0.08 220); /* sky blue muted color */
  --primary-foreground: oklch(0.985 0 0); /* white */

  --secondary: oklch(0.94 0.012 235); /* lighter cool gray-blue chip */
  --secondary-foreground: oklch(0.18 0.03 235);

  --muted: oklch(0.95 0.01 235); /* lighter subdued surface */
  --muted-foreground: oklch(0.32 0.03 235); /* secondary text - good contrast */

  --accent: oklch(0.79 0.16 152); /* brand green ≈ #00D47E */
  --accent-foreground: oklch(0.16 0.02 235); /* dark label on green */

  --destructive: oklch(0.62 0.18 27); /* warm red for errors */

  --border: oklch(0.88 0.012 235); /* divider ~#D4DEE6 */
  --input: oklch(0.88 0.012 235);
  --ring: oklch(0.65 0.08 220); /* sky blue focus ring */

  /* Charts (sky blue → green with cool neutrals) */
  --chart-1: oklch(0.6 0.08 220); /* sky blue muted */
  --chart-2: oklch(0.79 0.16 152); /* vivid green */
  --chart-3: oklch(0.64 0.04 235); /* slate line */
  --chart-4: oklch(0.72 0.02 245); /* soft steel */
  --chart-5: oklch(0.56 0.03 255); /* indigo-gray */

  /* Sidebar (light) - Lighter colors for better button visibility */
  --sidebar: oklch(0.985 0.004 235);
  --sidebar-foreground: oklch(0.18 0.03 235);
  --sidebar-primary: oklch(0.65 0.08 220);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent: oklch(0.82 0.15 152);
  --sidebar-accent-foreground: oklch(0.14 0.03 235);
  --sidebar-border: oklch(0.9 0.01 235);
  --sidebar-ring: oklch(0.65 0.08 220);
}

/* Optional dark complement (keeps brand hue) */
.dark {
  --background: oklch(0.17 0.02 235); /* deep blue-gray */
  --foreground: oklch(0.98 0 0);

  --card: oklch(0.22 0.02 235);
  --card-foreground: oklch(0.98 0 0);

  --popover: oklch(0.22 0.02 235);
  --popover-foreground: oklch(0.98 0 0);

  --primary: oklch(0.7 0.09 220); /* brighter sky blue for dark */
  --primary-foreground: oklch(0.98 0 0);

  --secondary: oklch(0.28 0.02 235);
  --secondary-foreground: oklch(0.92 0 0);

  --muted: oklch(0.28 0.02 235);
  --muted-foreground: oklch(0.72 0.015 235);

  --accent: oklch(0.82 0.17 152); /* glowing green */
  --accent-foreground: oklch(0.16 0.02 235);

  --destructive: oklch(0.66 0.18 27);

  --border: oklch(0.34 0.015 235 / 40%);
  --input: oklch(0.34 0.015 235 / 45%);
  --ring: oklch(0.7 0.09 220);

  --chart-1: oklch(0.7 0.09 220);
  --chart-2: oklch(0.82 0.17 152);
  --chart-3: oklch(0.7 0.05 235);
  --chart-4: oklch(0.6 0.03 250);
  --chart-5: oklch(0.74 0.02 240);

  --sidebar: oklch(0.22 0.02 235);
  --sidebar-foreground: oklch(0.98 0 0);
  --sidebar-primary: oklch(0.7 0.09 220);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent: oklch(0.82 0.17 152);
  --sidebar-accent-foreground: oklch(0.16 0.02 235);
  --sidebar-border: oklch(0.34 0.015 235 / 40%);
  --sidebar-ring: oklch(0.7 0.09 220);
}

/* Ensure the font is actually used */
html,
body,
:root {
  font-family: var(--font-sans);
}

@layer base {
  * {
    border-color: var(--border);
    outline-color: color-mix(in srgb, var(--ring), transparent 50%);
  }
  html,
  body {
    font-family: var(--font-sans);
    background-color: var(--background);
    color: var(--foreground);
    min-height: 100vh;
    margin: 0;
    padding: 0;
  }
  #root {
    min-height: 100vh;
    background-color: var(--background);
    font-family: var(--font-sans);
  }

  /* Typography hierarchy - ensure proper contrast */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: var(--foreground);
    font-weight: 700;
  }

  p,
  li,
  span,
  div {
    color: var(--foreground);
  }

  /* Utility classes for consistent text colors */
  .text-foreground {
    color: var(--foreground) !important;
  }

  .text-muted-foreground {
    color: var(--muted-foreground) !important;
  }

  .text-secondary-foreground {
    color: var(--secondary-foreground) !important;
  }

  /* Cursor pointer for all interactive elements */
  a,
  button,
  [role="button"],
  [type="button"],
  [type="submit"],
  [type="reset"],
  .cursor-pointer,
  .clickable {
    cursor: pointer;
  }

  /* Links styling with pointer cursor and transitions */
  a {
    color: var(--primary);
    text-decoration: none;
    cursor: pointer;
    transition: color 0.2s ease;
  }

  a:hover {
    color: color-mix(in oklch, var(--primary) 80%, black 20%);
    text-decoration: none;
  }

  a:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
    border-radius: 4px;
    text-decoration: none;
  }

  /* Button base styling with pointer cursor */
  button,
  [role="button"],
  [type="button"],
  [type="submit"],
  [type="reset"] {
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none !important;
  }

  button:hover,
  [role="button"]:hover,
  [type="button"]:hover,
  [type="submit"]:hover,
  [type="reset"]:hover {
    text-decoration: none !important;
    cursor: pointer;
  }

  /* Disabled state should override cursor */
  button:disabled,
  [role="button"]:disabled,
  [type="button"]:disabled,
  [type="submit"]:disabled,
  [type="reset"]:disabled,
  button[disabled],
  [role="button"][disabled],
  [type="button"][disabled],
  [type="submit"][disabled],
  [type="reset"][disabled],
  button[aria-disabled="true"],
  [role="button"][aria-disabled="true"] {
    cursor: not-allowed !important;
    opacity: 0.5;
  }

  /* Fix messaging button contrast issues with Tailwind classes */
  /* Target the actual button with size-8 and outline variant classes */
  .size-8[class*="outline"]:hover {
    background-color: color-mix(in oklch, var(--sidebar-primary) 20%, var(--sidebar)) !important;
    color: var(--sidebar-primary) !important;
    border-color: var(--sidebar-primary) !important;
  }

  .size-8.bg-sidebar-accent,
  .size-8[class*="bg-sidebar-accent"] {
    background-color: var(--sidebar-accent) !important;
    color: var(--sidebar-accent-foreground) !important;
    border-color: var(--sidebar-accent) !important;
  }

  .size-8.bg-sidebar-accent:hover,
  .size-8[class*="bg-sidebar-accent"]:hover {
    background-color: color-mix(in oklch, var(--sidebar-accent) 85%, black 15%) !important;
    color: var(--sidebar-accent-foreground) !important;
    border-color: var(--sidebar-accent) !important;
  }

  /* Fix nav-user avatar fallback contrast - ONLY on direct hover/click */
  /* Only apply styles when directly hovering the nav-user button, not sidebar-wide hover */
  [data-sidebar="menu-button"][data-size="lg"]:hover {
    background-color: var(--sidebar-accent) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"][data-state="open"] {
    background-color: var(--sidebar-accent) !important;
  }

  /* Default state - ensure avatar and text are always visible with strong specificity */
  [data-sidebar="menu-button"][data-size="lg"] .h-8.w-8.rounded-lg {
    background-color: color-mix(in oklch, var(--sidebar-foreground) 15%, var(--sidebar)) !important;
    color: var(--sidebar-foreground) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"] .truncate.font-medium,
  [data-sidebar="menu-button"][data-size="lg"] .truncate.text-xs {
    color: var(--sidebar-foreground) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"] .ml-auto.size-4 {
    color: var(--sidebar-foreground) !important;
  }

  /* Prevent ANY external hover effects from affecting nav-user */
  * [data-sidebar="menu-button"][data-size="lg"] .truncate.font-medium,
  * [data-sidebar="menu-button"][data-size="lg"] .truncate.text-xs,
  * [data-sidebar="menu-button"][data-size="lg"] .ml-auto.size-4,
  * [data-sidebar="menu-button"][data-size="lg"] .h-8.w-8.rounded-lg {
    color: var(--sidebar-foreground) !important;
  }

  * [data-sidebar="menu-button"][data-size="lg"] .h-8.w-8.rounded-lg {
    background-color: color-mix(in oklch, var(--sidebar-foreground) 15%, var(--sidebar)) !important;
  }

  /* ONLY on direct hover of the nav-user button */
  [data-sidebar="menu-button"][data-size="lg"]:hover .h-8.w-8.rounded-lg {
    background-color: color-mix(in oklch, var(--sidebar-accent-foreground) 90%, var(--sidebar-accent) 10%) !important;
    color: var(--sidebar-foreground) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"]:hover .truncate.font-medium,
  [data-sidebar="menu-button"][data-size="lg"]:hover .truncate.text-xs {
    color: var(--sidebar-accent-foreground) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"]:hover .ml-auto.size-4 {
    color: var(--sidebar-accent-foreground) !important;
  }

  /* ONLY on active/open state of the nav-user button */
  [data-sidebar="menu-button"][data-size="lg"][data-state="open"] .h-8.w-8.rounded-lg {
    background-color: color-mix(in oklch, var(--sidebar-accent-foreground) 90%, var(--sidebar-accent) 10%) !important;
    color: var(--sidebar-foreground) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"][data-state="open"] .truncate.font-medium,
  [data-sidebar="menu-button"][data-size="lg"][data-state="open"] .truncate.text-xs {
    color: var(--sidebar-accent-foreground) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"][data-state="open"] .ml-auto.size-4 {
    color: var(--sidebar-accent-foreground) !important;
  }

  /* Restore better sidebar menu button hover colors */
  [data-sidebar="menu-button"]:not([data-size="lg"]):hover {
    background-color: color-mix(in oklch, var(--sidebar-accent) 12%, var(--sidebar)) !important;
    color: var(--sidebar-accent) !important;
  }

  [data-sidebar="menu-button"][data-active="true"],
  [data-sidebar="menu-button"][data-active="true"]:hover {
    background-color: var(--sidebar-accent) !important;
    color: var(--sidebar-accent-foreground) !important;
  }

  /* Ultra-specific messaging button fixes */
  button[class*="size-8"]:hover svg,
  button[class*="size-8"]:hover * {
    color: inherit !important;
  }

  /* Fix Quick Import button - keep background same, only change text/icon on hover */
  [data-sidebar="menu-button"].bg-primary {
    background-color: var(--primary) !important;
    color: var(--primary-foreground) !important;
  }

  [data-sidebar="menu-button"].bg-primary:hover {
    background-color: var(--primary) !important;
    color: white !important;
  }

  [data-sidebar="menu-button"].bg-primary:active,
  [data-sidebar="menu-button"].bg-primary:focus {
    background-color: var(--primary) !important;
    color: white !important;
  }

  /* Override specific hover classes on Quick Import button */
  [data-sidebar="menu-button"][class*="hover:bg-primary"]:hover {
    background-color: var(--primary) !important;
    color: white !important;
  }

  [data-sidebar="menu-button"][class*="hover:text-primary"]:hover {
    color: white !important;
  }

  /* Ensure Quick Import button icon changes to white on hover */
  [data-sidebar="menu-button"].bg-primary:hover svg,
  [data-sidebar="menu-button"][class*="hover:bg-primary"]:hover svg {
    color: white !important;
  }

  /* Completely isolate nav-user from any sidebar hover effects */
  [data-sidebar="menu-button"][data-size="lg"] {
    isolation: isolate !important;
    position: relative !important;
    z-index: 100 !important;
  }

  /* Ensure nav-user elements NEVER inherit sidebar hover colors */
  [data-sidebar="menu-button"][data-size="lg"],
  [data-sidebar="menu-button"][data-size="lg"] *,
  [data-sidebar="menu-button"][data-size="lg"] .h-8.w-8.rounded-lg,
  [data-sidebar="menu-button"][data-size="lg"] .truncate,
  [data-sidebar="menu-button"][data-size="lg"] .ml-auto.size-4 {
    color: var(--sidebar-foreground) !important;
  }

  [data-sidebar="menu-button"][data-size="lg"] .h-8.w-8.rounded-lg {
    background-color: color-mix(in oklch, var(--sidebar-foreground) 15%, var(--sidebar)) !important;
  }
}
